---
title: "BikeShare"
author: "Joshua Corn"
email: "corn.joshua13@gmail.com"
date: "`r Sys.Date()`"
output: html_document
---

# Analysis for Cyclistic Bike Share

## Introduction

This analysis examines customer behavior patterns of Cyclistic bike share users from July 2024 to June 2025. The focus is on identifying ride service usage differences between casual users and annual members including rideable preferences, station usage and preferred areas, peak usage days, seasonal usage trends, and ride duration. this analysis aims to enable data-driven strategies to improve marketing effectiveness, member acquisition, and operational efficiency.

## Key Findings and Summary

\*Members ride more frequently, especially on weekdays, indicating consistent use likely tied to commuting.

\*Casual users ride longer on average, with highest usage on weekends, suggesting recreational or tourist behavior.

\*Classic bikes and Electric bikes are favored by both members and casual riders.

\*Peak riding months are April–October, with July and Summer months are busiest; January and Winter months are the slowest.

\*Saturdays are the most popular day for all users, with casual riders outnumbering members.

\*High casual rider volume contributes to the highest overall volume at many target stations.

## Conclusion and Reccomendations

To increase engagement and expand Cyclistic’s membership base, marketing strategies should prioritize areas with high casual user activity. Deploying promotional materials at popular stations with heavy casual traffic (such as Streeter Dr. & Grand Ave.) can raise awareness and convert occasional riders into regular users. These localized efforts ensure marketing resources are used efficiently in areas with the highest conversion potential.

Membership should include tangible benefits such as priority access to classic bikes, weekend specials or events, loyalty programs, discounted electric rideable campaigns, and various targeted station specials at the higher casual turn-out stations. Messaging should also include the inherent benefits of becoming a more frequent rider including reducing carbon emissions, increasing physical wellness, and having a more enjoyable form of transportation. Campaigns focused on weekday riders could be framed around saving time and avoiding public transit delays, appealing to those with consistent travel needs as well as casual riders trying to travel worry-free.

Finally, targeted surveys should be conducted at key high-traffic stations. These surveys will help uncover barriers to membership, identify casual user preferences, and gauge overall satisfaction. With these insights, marketing professionals can refine their approach, tailor incentives more precisely, and develop outreach strategies that resonate with each user segment.

## Visual Analysis Insights

#### Monthly Ride Time (Members vs Casual)

\*Casual riders log significantly more hours in summer months, suggesting a preference for leisure riding.

\*Members ride more consistently year-round, likely due to a need to commute.

#### Bike Type Usage

\*Casual riders prefer electric and docked bikes.

\*Members show a strong preference for classic bikes.

\*Electric scooter usage is very low with members and casual riders alike.

#### Total Ride Time

\*Members take more frequent rides, contributing to overall volume.

\*Casual users ride less often but for longer a duration per ride.

#### Top 30 Stations

\*Certain stations show high member activity, ideal for commuter-based campaigns.

\*Others see more casual traffic, suggesting more scenic or leisurely routes around the area.

#### Top 15 Casual-dominant Areas

\*Highest casual usage stations show relatively low member activity.

\*Casual-dominant stations can be potential targets for future marketing efforts.

#### Ride Volume by Weekday

\*Casual users ride mostly on weekends, especially Saturdays.

\*Members dominate weekday usage, consistent with commuter patterns.

\*This behavior can inform weekday commuter programs and weekend promotions.

#### Ride Duration by Weekday

\*Casual users take longer rides consistently across the week.

\*Weekends show longer ride duration for both groups.

\*Saturdays show the longest average ride duration for both groups.

## Packages Set Up

All packages used in this analysis are part of the tidyverse, which provides a cohesive set of tools for data manipulation, visualization, and analysis.

```{r}
install.packages("tidyverse")
library(tidyverse)
```

## Gathering Data

Data for this assignment was collected from the following online repository: <https://divvy-tripdata.s3.amazonaws.com/index.html>. The data I collected was for the past 12 months of activity spanning from July 2024 to June 2025. This data was then imported into RStudio and combined into one single, manageable table using the following lines of code in R Studio.

```{r}
df1 <- read_csv(file.choose())
df2 <- read_csv(file.choose())
df3 <- read_csv(file.choose())
df4 <- read_csv(file.choose())
df5 <- read_csv(file.choose())
df6 <- read_csv(file.choose())
df7 <- read_csv(file.choose())
df8 <- read_csv(file.choose())
df9 <- read_csv(file.choose())
df10 <- read_csv(file.choose())
df11 <- read_csv(file.choose())
df12 <- read_csv(file.choose())
```

Each file must be chosen manually to avoid any discrepancy in file path or location between users. This also ensures the permissions are granted to import to R Studio.

Next, I combined all of these tables into one using the following:

```{r}
combined_df <- bind_rows(df1, df2, df3, df4, df5, df6, df7, df8, df9, df10, df11, df12)

View(combined_df)
```

Once combined, I used a write funciton to create a separate csv file that I could use to clean the data in one step. A file name and destination must be chosen for the new file.

```{r}
write_csv(combined_df, file.choose())
```

I decided to name my file "BikeShareAllData.csv". This made the data cleaning process much more efficient and accurate across all of the data.

Next, I removed the separate 12 tables from my work space environment to improve memory performance.

```{r}
rm(df1, df2, df3, df4, df5, df6, df7, df8, df9, df10, df11, df12)
```

Import combined data table.

```{r}
# Import combined data table
BikeShareAllData <- read_csv(file.choose())
```

## Cleaning and Organizing the Data

The started_at and ended_at timestamps were converted to POSIXct format to enable precise time-based calculations. Ride duration was calculated in seconds and later formatted for readability.

```{r}
# Ensure all time formats are converted to POSIXct "Y-m-d H:M:S" format
BikeShareAllData$started_at <- as.POSIXct(BikeShareAllData$started_at, format = "%Y-%m-%dT%H:%M:%SZ")
BikeShareAllData$ended_at   <- as.POSIXct(BikeShareAllData$ended_at, format = "%Y-%m-%dT%H:%M:%SZ")

# Calculate the difference of started_at and ended_at
# Convert the format to total seconds and round to the nearest second
BikeShareAllData$ride_duration <- as.numeric(BikeShareAllData$ended_at - BikeShareAllData$started_at, units = "secs")
BikeShareAllData$ride_duration <- round(BikeShareAllData$ride_duration)

# Convert duration result to a "H:M:S"
BikeShareAllData$ride_duration <- sprintf("%02d:%02d:%02d",
+                            BikeShareAllData$ride_duration %/% 3600,
+                            (BikeShareAllData$ride_duration %% 3600) %/% 60,
+                            BikeShareAllData$ride_duration %% 60)
```

Now that the data is organized and formatted in a logical way, I began cleaning the data.

First, I isolated the seconds values that were below one second and inspected them in a separate table.

```{r}
# Convert ride_duration to total seconds value
BikeShareAllData$ride_duration_sec <-as.numeric(hms(BikeShareAllData$ride_duration))

# Create temporary table for analysis
df_filtered <- BikeShareAllData[BikeShareAllData$ride_duration_sec < 1, ]
View(df_filtered)

```

```{r}
# Condense the filtered data to remove irrelevant values
df_filtered <- df_filtered %>%
  select(-ride_id, -rideable_type, -start_station_id, -start_station_name, -end_station_name, -end_station_id, -start_lat, -start_lng, -end_lat, -end_lng)

# Display condensed, filtered data slice
knitr::kable(df_filtered)
  
```

Instances with ride durations under 1 second were identified and removed. These values, primarily occurring on a single date (November 3rd, 2024), are considered data errors with no clear pattern or user behavior explanation.

I then filtered and removed invalid values for the ride duration value. I also deleted the temporary df_filtered table for later use.

```{r}

# Exclude all values below 1 second and remove the temporary second values column
BikeShareAllData <- BikeShareAllData[BikeShareAllData$ride_duration_sec >= 1, ]
BikeShareAllData$ride_duration_sec <- NULL

# Remove temporary filtered table
rm(df_filtered)
```

Next I ensured all rows and columns had valid values, removing inappropriate values from the BikeShareAllData table.

```{r}

# Remove all "NA" values in start/end station name columns
BikeShareAllData <- BikeShareAllData%>%
    filter(start_station_name !="")
BikeShareAllData <- BikeShareAllData%>%
    filter(end_station_name !="")
```

```{r}

# Ensure all instances of "NA" are removed from the table
df_temp <- is.na(BikeShareAllData)
df_temp <- unique(as.vector(df_temp))
knitr::kable(df_temp)

# Delete table if all values are confirmed to be False, evident by no true value in table
rm(df_temp)
```

```{r}

# Ensure only appropriate values appear in member_casual column
df_temp <- unique(BikeShareAllData$member_casual)
knitr::kable(df_temp)

# Delete table if all values are confirmed to be only "member" or "casual"
rm(df_temp)
```

The data has been reduced to 3911671 lines after cleaning. Next, I organized this data into usable tables that will help in analysis and visualization.

To understand engagement levels between user types, I aggregated total ride durations and counts by membership type.

```{r}

# Create new table with ride time and ride count calculated and grouped by whether the rider is casual or member
BikeShare_RideTime <- BikeShareAllData %>%
  group_by(member_casual) %>%
  summarize( ride_count =n(),
             sec = sum(as.numeric(hms(ride_duration))),
            .groups = 'drop')

# Create calculations of minutes and hours
BikeShare_RideTime$min <- BikeShare_RideTime$sec / 60
BikeShare_RideTime$hr <- BikeShare_RideTime$sec / 3600
```

I made a summary table of start station demographics. This will allow us to see where more members or casual riders are using the service and which stations receive the most traffic.

```{r}

# Create a table outlining station usage between members and casuals
BikeShare_Area <- BikeShareAllData %>%
  group_by(start_station_name, member_casual) %>%
  summarize(ride_count = n()) %>%

# Create separate columns for member and casual to designate ride time to each category
  pivot_wider(names_from = member_casual, values_from = ride_count, values_fill = 0) %>%
  mutate("difference(members)" = member - casual, total_rides = member + casual)
  
```

To detect trends across time, I aggregated ride counts and durations by month and user category.

```{r}

# Create a table outlining monthly ride count and  time spent grouped by month and member status
BikeShare_Season <- BikeShareAllData %>%
  mutate(sec = as.numeric(hms(ride_duration)), 
         month = factor(format(BikeShareAllData$started_at, "%B"), levels = month.name, ordered = TRUE),
         min = sec/60, hr = sec/3600 ) %>%
  group_by(month, member_casual) %>%
  summarize(rides = n(),
            sec = sum(sec),
            min = sum(min),
            hr = sum(hr)) %>%
  
# Create separate columns for member and casual to designate ride time and ride count to each category
  
  pivot_wider(names_from = member_casual, values_from = c(rides, sec, min, hr), values_fill = 0) %>%
  mutate(total_rides = rides_member + rides_casual, total_sec = sec_member + sec_casual, 
         total_min = min_member + min_casual, total_hr = hr_member + hr_casual)
    
```

I made a table outlining the different behaviors as to rideable type and how members and casuals use different types.

```{r}

# Create table grouped by rideable type, separated by casual or member, and showing the count of rides using each rideable type.
BikeShare_Ride <- BikeShareAllData %>%
  group_by(rideable_type, member_casual) %>%
  summarize(ride_count = n()) %>%
  pivot_wider(names_from = member_casual, values_from = ride_count, values_fill = 0)
```

For analysis of weekly riding habits by day and by membership type, another table was made.

```{r}

# Create table grouped by weekday which provides averages and total values for ride count and duration per day
BikeShare_Day <- BikeShareAllData %>%
  mutate(day = factor(weekdays(as.Date(started_at)), 
        levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"), 
        ordered = TRUE),
        ride_duration_sec = as.numeric(hms(ride_duration))) %>%
  group_by(day, member_casual) %>%
  
  # Factor count and duration totals averages per day
  summarize(ride_count = n(),
            ride_duration_total = sum(ride_duration_sec, na.rm = TRUE),
            ride_duration_avg = round(mean(ride_duration_sec, na.rm = TRUE)/60),
            .groups = "drop") %>%
  mutate(ride_duration_min = round(ride_duration_total/60), 
        ride_duration_hr = round(ride_duration_total/3600),
        ride_count_avg = round(ride_count/52)) %>%
  pivot_wider(names_from = member_casual, values_from = c(ride_count_avg, ride_count, ride_duration_total, ride_duration_avg,                                 ride_duration_min,ride_duration_hr), values_fill = 0)
```

## Analysis

The primary objective of this analysis is to uncover patterns and behavioral differences between Cyclistic’s casual riders and annual members. These findings aim to support data-driven marketing decisions focused on increasing user retention and converting casual users into members.

#### Monthly Ride Time (Members vs Casual)

This line graph displays the total ride duration (in hours) per month for both members and casual riders. It helps highlight seasonal usage patterns and differences in rider behavior over the course of a year.

```{r}
ggplot(BikeShare_Season, aes(x = month)) +
  # Member line
  geom_line(aes(y = hr_member, color = "member", group = 1), linewidth = 1.2) +
  geom_point(aes(y = hr_member, color = "member"), size = 3) +

  # Casual line
  geom_line(aes(y = hr_casual, color = "casual", group = 1), linewidth = 1.2) +
  geom_point(aes(y = hr_casual, color = "casual"), size = 3) +

  labs(
    title = "Monthly Ride Time",
    x = "Month",
    y = "Total Ride Time (Hours)",
    color = "User Type"
  ) +
  scale_color_manual(values = c("member" = "#2E86C1", "casual" = "#E67E22")) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

The plot shows that casual riders log more ride time during warmer months, likely for leisure, while members ride more consistently year-round, suggesting regular commuting. These trends can guide seasonal marketing and user engagement strategies.

#### Bike Type Usage

The following bar chart compares the number of rides by rideable type, split between members and casual riders. This helps identify which types of rideables are preferred by each user group and can inform inventory and resource allocation.

```{r}
BikeShare_Ride %>%
  pivot_longer(cols = c(member, casual), names_to = "user_type", values_to = "ride_count") %>%
  ggplot(aes(x = rideable_type, y = ride_count, fill = user_type)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.8), width = 0.7) +
  labs(
    title = "Rideable Type Usage",
    x = "Rideable Type",
    y = "Number of Rides",
    fill = "User Type"
  ) +
  scale_fill_manual(values = c("member" = "#2E86C1", "casual" = "#E67E22")) +
  theme_minimal()
```

The chart shows clear differences in rideable preferences. Casual riders favor electric and docked bikes, while members tend to prefer classic bikes. These insights can support operational planning and bike fleet management across rider types.

#### Total Rides and Ride Time

To compare overall usage, this bar chart shows two key metrics — total ride count and total ride time (in hours) — for both members and casual riders. This layout highlights how each user group contributes to usage volume and engagement time.

```{r}
BikeShare_RideTime %>%
  select(member_casual, ride_count, hr) %>%
  pivot_longer(cols = c(ride_count, hr), names_to = "metric", values_to = "value") %>%
  mutate(metric = ifelse(metric == "ride_count", "Ride Count", "Total Hours")) %>%
  ggplot(aes(x = metric, y = value, fill = member_casual)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.7), width = 0.6) +
  labs(
    title = "Comparison of Ride Count and Ride Hours",
    x = "",
    y = "Hours/Rides",
    fill = "User Type"
  ) +
  scale_fill_manual(values = c("member" = "#2E86C1", "casual" = "#E67E22"),
                    labels = c("Member", "Casual")) +
  theme_minimal()
```

The chart reveals that members take significantly more rides, while casual riders contribute more proportionally to total hours ridden. This reinforces the pattern of frequent short trips by members versus longer, less frequent rides by casual users — valuable for shaping product offerings and engagement strategies.

#### Top 30 Stations

This analysis identifies the 50 bike share stations with the highest overall ride activity. By aggregating total rides and visualizing the breakdown of user types per station, the chart highlights the most popular locations in the network and which rider type is most present at those locations.

```{r fig.height= 15, fig.width=10}
# Compute total rides per station
station_totals <- BikeShare_Area %>%
  group_by(start_station_name) %>%
  summarise(total_rides = sum(total_rides, na.rm = TRUE)) %>%
  arrange(desc(total_rides)) %>%
  slice_head(n = 30)

# Get top 50 station names in decending order
top_30_stations <- station_totals$start_station_name

# Filter original data and set factor levels
plot_data <- BikeShare_Area %>%
  filter(start_station_name %in% top_30_stations) %>%
  mutate(start_station_name = factor(start_station_name, levels = rev(top_30_stations))) %>%
  pivot_longer(cols = c(casual, member), names_to = "User_Type", values_to = "Ride_Count")

ggplot(plot_data, aes(x = Ride_Count, y = start_station_name, fill = User_Type)) +
  geom_col(position = "dodge") +
  labs(
    title = "Rides by Station (Top 30 stations))",
    x = "Number of Rides",
    y = "Start Station",
    fill = "User Type"
  ) +
  theme_minimal() +
  theme(
  axis.text.y = element_text(size = 20, margin = margin(r = 10)),  # Increased from 6 to 10
  plot.title = element_text(hjust = 0.5),
  legend.position = "right"
) +
  scale_fill_manual(values = c("casual" = "#E69F00", "member" = "#56B4E9")) +
  coord_cartesian(clip = "off")

# Clean Env
rm(station_totals, top_30_stations, plot_data)
```

This insight helps prioritize stations that drive the greatest volume of ridership, enabling data-driven decisions for resource allocation, infrastructure improvements, and marketing efforts focused on high-traffic areas. The side-by-side comparison of casual versus member rides offers a clear view of user composition at each top-performing station.

#### Top 15 Casual-dominant Stations

This analysis focuses on identifying the 15 bike share stations where the casual rider activity is higher than member activity. By aggregating ride data and highlighting stations with highest casual activity, the resulting visualization offers clear insight into locations where casual riders are utilizing the start station more than members.

```{r fig.height=10, fig.width=10}

# Compute total difference(members) per station
station_totals <- BikeShare_Area %>%
  group_by(start_station_name) %>%
  summarise(difference = sum(`difference(members)`, na.rm = TRUE)) %>%
  arrange(difference) %>%
  slice_head(n = 15)

# Get top 15 station names in decending order
top_15_stations <- station_totals$start_station_name

# Filter original data and set factor levels for plotting
plot_data <- BikeShare_Area %>%
  filter(start_station_name %in% top_15_stations) %>%
  mutate(start_station_name = factor(start_station_name, levels = rev(top_15_stations))) %>%
  pivot_longer(cols = c(casual, member), names_to = "User_Type", values_to = "Ride_Count")

ggplot(plot_data, aes(x = Ride_Count, y = start_station_name, fill = User_Type)) +
  geom_col(position = "dodge") +
  labs(
    title = "Rides by Station (Top 15 Highest Casual Usage Stations)",
    x = "Number of Rides",
    y = "Start Station",
    fill = "User Type"
  ) +
  theme_minimal() +
  theme(
    axis.text.y = element_text(size = 20, margin = margin(r = 10)),
    plot.title = element_text(hjust = 0.5),
    legend.position = "right"
  ) +
  scale_fill_manual(values = c("casual" = "#E67E22", "member" = "#2E86C1")) +
  coord_cartesian(clip = "off")

# Clean Env
rm(station_totals, top_15_stations, plot_data)
```

Understanding these stations is crucial for tailoring marketing strategies and optimizing resources to attract new members from the casual rider base. The side-by-side comparison of casual versus member rides per station provides actionable intelligence for targeted outreach and service improvements.

#### Ride Volume by Weekday

This visualization displays average ride volume by weekday by user type. By separating the casual rider and member trends throughout the week, we can narrow the scope on marketing strategy to a more narrow view of daily and weekly trends.

```{r}

BikeShare_Day %>%
  select(day, ride_count_avg_casual, ride_count_avg_member) %>%
  pivot_longer(cols = c(ride_count_avg_member, ride_count_avg_casual), names_to = "user_type", values_to = "ride_count_avg") %>%
  mutate(user_type = ifelse(user_type == "ride_count_avg_member", "member", "casual")) %>%
  ggplot(aes(x = day, y = ride_count_avg, fill = user_type)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.8), width = 0.7) +
  labs(
    title = "Ride Count per Day by User Type",
    x = "Day",
    y = "Ride Count (Average)",
    fill = "User Type"
  ) +
  scale_fill_manual(values = c("member" = "#2E86C1", "casual" = "#E67E22")) +
  theme_minimal() 
```

This visualization provides insight to how many riders are actively taking rides and when they tend to take those rides. This is important especially for casual riders, who seem to be more active on the weekends, specifically Saturdays.

#### Ride Duration by Weekday

This chart shows the average ride counts for members and casual users across each day of the week.

```{r}

BikeShare_Day %>%
  select(day, ride_duration_avg_casual, ride_duration_avg_member) %>%
  pivot_longer(cols = c(ride_duration_avg_member, ride_duration_avg_casual), names_to = "user_type", values_to = "ride_duration_avg") %>%
  mutate(user_type = ifelse(user_type == "ride_duration_avg_member", "member", "casual")) %>%
  ggplot(aes(x = day, y = ride_duration_avg, fill = user_type)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.8), width = 0.7) +
  labs(
    title = "Ride Duration per Day by User Type",
    x = "Day",
    y = "Ride Duration (Average in Minutes)",
    fill = "User Type"
  ) +
  scale_fill_manual(values = c("member" = "#2E86C1", "casual" = "#E67E22")) +
  theme_minimal() 
```

Members maintain a regular ride duration across the week, while casual riders vary slightly, taking the longest rides over the weekends. This informs us that we have a trend of lengthy rides among casual riders compared to members, informing new marketing strategies and possible offers for new members.
